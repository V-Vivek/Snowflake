# Data Sharing in Snowflake
## Overview of Data Sharing

Data sharing in Snowflake allows organizations to share data securely and efficiently with other Snowflake accounts without the need to copy or move data. This feature is particularly useful for collaboration between different departments, partners, or customers. Data sharing ensures that the data remains in the provider's account, and the consumer can access it in real-time with `read-only` access.

### Benefits of Data Sharing

- **Real-Time Access**: Consumers can access the most up-to-date data without waiting for data transfers.
- **Security**: Data sharing is secure, with granular control over what data is shared and who can access it.
- **Cost Efficiency**: Eliminates the need for data duplication and storage costs associated with traditional data sharing methods.
- **Simplicity**: Simplifies data collaboration and reduces the complexity of data integration.

### Cost for Provider and Consumer

#### Provider Costs

For the data provider, the primary costs associated with data sharing include:

- **Storage Costs**: The provider incurs storage costs for maintaining the shared data in their Snowflake account.
- **Compute Costs**: If the provider performs any transformations or processing on the data before sharing, they will incur compute costs.

#### Consumer Costs

For the data consumer, the costs include:

- **Compute Costs**: Consumers incur compute costs when they query the shared data. The cost is based on the amount of compute resources used to execute the queries.
- **Storage Costs**: If the consumer decides to create a copy of the shared data in their own account, they will incur storage costs for the copied data.

Overall, Snowflake's data sharing feature provides a cost-effective and efficient way to share data between different accounts while maintaining security and control over the data.

## Setting Up Data Share at Provider End

1. **Create Share Object**:
    ```sql
    CREATE SHARE my_share;
    ```

2. **Grant Privileges to Share**:
    ```sql
    -- Grant privileges for databse
    GRANT USAGE ON DATABASE my_database TO SHARE my_share;

    -- Grant privileges for schema
    GRANT USAGE ON SCHEMA my_schema TO SHARE my_share;

    -- Grant privileges for specific table
    GRANT SELECT ON TABLE my_schema.my_table TO SHARE my_share;

    -- Grant privileges for all tables within the schema
    GRANT SELECT ON ALL TABLES IN SCHEMA my_schema TO SHARE my_share;
    ```

3. **Add Consumer Account**:
    ```sql
    ALTER SHARE my_share ADD ACCOUNTS = 'consumer_account';
    ```

4. **Validate Grants**:
    ```sql
    SHOW GRANTS TO SHARE my_share;
    ```

## Importing Share at Consumer End

- **Provider Account**: The `provider_account` is the account identifier of the Snowflake account that is sharing the data. This information is provided by the data provider. You can obtain the provider account identifier from the data provider or from the share details.

- **Getting Provider Account Info**: To get the provider account information, you can use the `SHOW SHARES` command at the consumer end, which will list all available shares along with their provider account identifiers.

1. **Show Available Shares**:
    ```sql
    SHOW SHARES;
    ```

2. **Describe Share**:
    ```sql
    DESC SHARE my_share;
    ```

3. **Create Database from Share**:
    ```sql
    CREATE DATABASE my_consumer_db FROM SHARE provider_account.my_share;
    ```

4. **Query the Shared Table**:
    ```sql
    SELECT * FROM my_consumer_db.my_schema.my_table;
    ```

    ## Sharing Data with Non-Snowflake Users Using Reader Accounts

    Snowflake allows data providers to share data with non-Snowflake users by creating reader accounts. A reader account is a special type of Snowflake account that is fully managed by the data provider. This enables the provider to share data with users who do not have their own Snowflake accounts.

    ### Creating a Reader Account

    To create a reader account, follow these steps:

    1. **Create Reader Account**:
        ```sql
        CREATE MANAGED ACCOUNT reader_account
        ADMIN_NAME = 'reader_admin'
        ADMIN_PASSWORD = 'StrongPassword123!';
        ```

    2. **Add Reader Account to Share**:
        ```sql
        ALTER SHARE my_share ADD ACCOUNTS = 'reader_account';
        ```

    ### Accessing Data in Reader Account

    Once the reader account is created and privileges are granted, the non-Snowflake user can access the shared data by logging into the reader account. The user can then query the shared data as needed.

    Overall, using reader accounts is an effective way to share data with external users who do not have their own Snowflake accounts, while maintaining control over the shared data.