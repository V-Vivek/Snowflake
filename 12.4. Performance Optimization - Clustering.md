# Performance Optimization - Clustering

## Clustering Key and Clustered Table

### Clustering Key
A clustering key is a column or a set of columns that Snowflake uses to co-locate similar data in the same micro-partitions. This helps in optimizing query performance by reducing the amount of data scanned during query execution.

### Clustered Table
A clustered table is a table that has been defined with a clustering key. This means that the data in the table is organized based on the values in the clustering key columns, which can significantly improve query performance, especially for large tables.

## Benefits of Clustering
- **Improved Query Performance**: By reducing the amount of data scanned, clustering can significantly speed up query execution times.
- **Efficient Storage**: Clustering can lead to better data compression and storage efficiency.
- **Reduced Costs**: Faster queries mean less compute time, which can result in cost savings.

## Strategies for Selecting Cluster Keys
- **High Cardinality Columns**: Choose columns with a high number of unique values.
- **Frequently Queried Columns**: Select columns that are often used in query filters, joins, or group by clauses.
- **Date/Time Columns**: For time-series data, clustering by date or time columns can be very effective.
- **Composite Keys**: Sometimes, using a combination of columns as a clustering key can provide better performance.

## Sample Queries

### Create Clustered Table
```sql
CREATE TABLE sales (
    order_id INT,
    customer_id INT,
    order_date DATE,
    amount DECIMAL(10, 2)
)
CLUSTER BY (order_date);
```

### Alter Clustering Key
```sql
ALTER TABLE sales
CLUSTER BY (customer_id, order_date);
```

### Drop Clustering Key
```sql
ALTER TABLE sales
DROP CLUSTERING KEY;
```