# Dynamic Data Masking in Snowflake

Dynamic Data Masking (DDM) in Snowflake allows you to control access to sensitive data by masking it for unauthorized users. This feature helps in protecting sensitive information while still allowing users to perform their tasks.

## Example to Create Masking Policy

To create a masking policy, use the following example:

```sql
CREATE MASKING POLICY ssn_masking_policy
AS (val string) 
RETURNS string ->
CASE
    WHEN current_role() IN ('HR_ROLE', 'ADMIN_ROLE') THEN val
    ELSE 'XXX-XX-XXXX'
END;
```

In this example, the `ssn_masking_policy` masks the Social Security Number (SSN) column. Only users with the roles `HR_ROLE` or `ADMIN_ROLE` can see the actual SSN, while others see a masked value.

## Example to Set Masking Policy

To set a masking policy on a column, use the following example:

```sql
ALTER TABLE employees
MODIFY COLUMN ssn
SET MASKING POLICY ssn_masking_policy;
```

In this example, the `ssn_masking_policy` is applied to the `ssn` column of the `employees` table.

## Example to Unset Masking Policy

To unset a masking policy from a column, use the following example:

```sql
ALTER TABLE employees
MODIFY COLUMN ssn
UNSET MASKING POLICY;
```

In this example, the masking policy is removed from the `ssn` column of the `employees` table.

## Example to Alter Existing Policy

To alter an existing masking policy, use the following example:

```sql
ALTER MASKING POLICY ssn_masking_policy
SET BODY AS (val string) 
RETURNS string ->
CASE
    WHEN current_role() IN ('HR_ROLE', 'ADMIN_ROLE', 'MANAGER_ROLE') THEN val
    ELSE 'XXX-XX-XXXX'
END;
```

In this example, the `ssn_masking_policy` is altered to include the `MANAGER_ROLE` in addition to the existing roles.